/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/*   ----------------------------------------------------------------------------------------------   */
/*                                          小鸡叽叽科技出品		                                  		*/
/*                                         www.xiaojijiji.com		                                  		*/
/*   ----------------------------------------------------------------------------------------------   */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/*   -----------------------------------------------------------------------------------------------  */
/*	                     感谢您支持小鸡叽叽科技，请遵守保密协议，保护作者的劳动成果，                 */
/*                                  未经允许请不要将资料、代码传送他人或者网络	                      */
/*																		         仅供内部使用                                           */
/* ************************************************************************************************** */





#include "Reg_SP37.h"
#include "SP37_ROMLibrary.h"
#include <uart.h>
#include <stdio.h>
#include <ctype.h>

idata ID_Struct ID_Result;

void MAIN(void)
{
	unsigned char StatusByte;

	struct{
		signed int Voltage;
		signed int Raw_voltage;
	}idata Volt_Result;

	Uart_Init();

	
	while(1){
		
		WDRES = 1;

		Start_Supply_Voltage();

		Trig_Supply_Voltage();
		
		StatusByte = Get_Supply_Voltage(&Volt_Result.Voltage);

		if(!StatusByte)
		{
			printf("Get_Supply_Voltage OK\r\n");
			printf("The Raw Val is %d,%d\r\n",Volt_Result.Voltage,Volt_Result.Raw_voltage);
			printf("The Voltage is %f v\r\n",Volt_Result.Voltage/8.0/1000);
		}
		else
		{
			printf("Get_Supply_Voltage Error!\r\n");
		}

		//延时1S
		
		Wait100usMultiples(10000);
	}
}




