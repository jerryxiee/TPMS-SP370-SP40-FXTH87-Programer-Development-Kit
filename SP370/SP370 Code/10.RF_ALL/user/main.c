/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/*   ----------------------------------------------------------------------------------------------   */
/*                                          小鸡叽叽科技出品		                                  		*/
/*                                         www.xiaojijiji.com		                                  		*/
/*   ----------------------------------------------------------------------------------------------   */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/*   -----------------------------------------------------------------------------------------------  */
/*	                     感谢您支持小鸡叽叽科技，请遵守保密协议，保护作者的劳动成果，                 */
/*                                  未经允许请不要将资料、代码传送他人或者网络	                      */
/*																		         仅供内部使用                                           */
/* ************************************************************************************************** */





#include "Reg_SP37.h"
#include "SP37_ROMLibrary.h"
#include <uart.h>
#include <SP37.h>
#include <RF.h>

void MAIN(void)
{
	unsigned char StatusByte;
	T_SP37_DATA idata t_sp37;

	//串口初始化
	Uart_Init();
	//RF433初始化
	Send_RF_Init();

	Read_SP37_ID(&t_sp37.IDH,&t_sp37.IDL);
	
	while(1)
	{
		WDRES = 1;

		Measure_Pressure(&t_sp37.Pressure);
		Measure_Temperature(&t_sp37.Temperature);
		Measure_Acceleration(&t_sp37.Acceleration);
		Measure_Supply_Voltage(&t_sp37.Voltage);
		
		StatusByte = Send_RF(t_sp37);
		
		if(!StatusByte)
			printf("Send_RF Succeed\r\n");
		else
			printf("Send_RF ERROR\r\n");
		
		Wait100usMultiples(100);
	}
}

