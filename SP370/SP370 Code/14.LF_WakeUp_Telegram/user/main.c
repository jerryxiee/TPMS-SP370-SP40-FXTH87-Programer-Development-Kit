/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/*   ----------------------------------------------------------------------------------------------   */
/*                                          小鸡叽叽科技出品                                          */
/*                                         www.xiaojijiji.com                                         */
/*   ----------------------------------------------------------------------------------------------   */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/* ************************************************************************************************** */
/*   ----------------------------------------------------------------------------------------------   */
/*                       感谢您支持小鸡叽叽科技，请遵守保密协议，保护作者的劳动成果                   */
/*                                  未经允许请不要将资料、代码传送他人或者网络                        */
/*                                           仅供内部使用                                             */
/* ************************************************************************************************** */



#include "Reg_SP37.h"
#include "SP37_ROMLibrary.h"
#include <uart.h>
#include <SP37.h>
#include <RF.h>
#include <LF.h>

#include <absacc.h>		//绝对地址访问包含头文件


/* ***************************************************************************** */
/* 此例程为LF报文侦测模式，只有Wakeup ID匹配的时候才会唤醒                       */
/* Wakeup ID取决于"LF激励源发射的ID"                                             */
/* LF 相关文档请参考"SP37_LF_v1.0.pdf","SP37_Datasheet_V1.0.pdf"                 */
/* 文档位于"SP37 相关资料"或者"SP37 芯片数据手册"                                */
/* ***************************************************************************** */

void MAIN(void)
{
	unsigned char store_wuf;
	
	Uart_Init();

	store_wuf = WUF;						//记录唤醒源
	printf("Power On,WUF = %02X\r\n",(int)store_wuf);	//每次PowerOn时printf WUF的值

	if(store_wuf == 0x00){			//第一次上电的时候,进行配置
															//第一次上电的时候WUF = 0x00
		LF_Configure_Telegram();	
	}
	if(store_wuf & 0x04){
		printf("LF Wake Up For Pattern 0...\r\n");	//报文唤醒
	}

	Powerdown();
}

